# ---------------------------------------------------
# ZSH CONFIG: aliases and variables for zsh
# ---------------------------------------------------

export HISTFILE=$HOME/.zsh_history
# better, more magical history with atuin.sh
[[ ! -f $HOME/.atuin/bin/env ]] || source $HOME/.atuin/bin/env
eval "$(atuin init zsh)"

#
# - JAVA related
#
# ec2/java stuff
[[ ! -f /usr/libexec/java_home ]] || export JAVA_HOME="$(/usr/libexec/java_home -v 1.8)"
# export PATH="/opt/homebrew/opt/openjdk/bin:$PATH"
export ES_HEAP_SIZE=32m
export ES_JAVA_OPTS=-server
export ES_DIRECT_SIZE=32m
export MAX_LOCKED_MEMORY=32m

# # go related
# export GOPATH=~/src/go
# export GOBIN=$GOPATH/bin
# export GO15VENDOREXPERIMENT=1
# export PATH=$GOPATH/bin:$PATH

# ruby related
export PRY_HISTFILE=.pry_history
export PATH="$HOME/.yarn/bin:$HOME/.config/yarn/global/node_modules/.bin:$PATH"
alias nxt=.bundle/gems/next_rails-1.1.0/exe/next.sh
# # make ruby quieter rn
# export RUBYOPT='-W0 -W:no-deprecated -W:no-experimental'
export RUBY_YJIT_ENABLE=1
export ENABLE_YJIT=1
export DISABLE_SPRING=true

# rubocop hack
alias spacecop='rubocop -A --only Style/FrozenStringLiteralComment,Layout/EmptyLines,Style/StringLiterals,Layout/EmptyLinesAroundBlockBody,Layout/EmptyLineAfterMagicComment,Layout/EmptyLinesAroundClassBody,Layout/TrailingWhitespace,Layout/EmptyLinesAroundBlockBody,Layout/EmptyLinesAroundModuleBody,Layout/EmptyLinesAroundMethodBody,Layout/SpaceAroundOperators,Layout/TrailingEmptyLines,Layout/SpaceInsideHashLiteralBraces,Layout/EmptyLineAfterGuardClause,Layout/FirstHashElementIndentation,Layout/EmptyLines,Layout/SpaceAfterComma,Layout/HashAlignment'
alias clouddocs='cd /Users/james/Library/Mobile\ Documents/com\~apple\~CloudDocs'

# neovim
export NVIM_RUBY_LOG_FILE=$HOME/.local/state/nvim/nvim_ruby.log
export NVIM_RUBY_LOG_LEVEL=debug

# work around a bug or something
export OBJC_DISABLE_INITIALIZE_FORK_SAFETY=YES

# add my bin to path
export PATH=$HOME/bin:$PATH

update_theme() {

  dark_override=false

  if $dark_override || macos_is_dark; then
    export LIGHT_MODE='DARK'
    export BAT_THEME='Visual Studio Dark+'
    # https://dom111.github.io/grep-colors/
    export GREP_COLORS='sl=49;38;5;247;2:cx=49;38;5;242;2:mt=48;5;197;38;5;222;1;4:fn=49;38;5;199;2:ln=49;38;5;199;2:bn=49;38;5;141;2:se=49;38;5;81;1'

    # Customize the style that the suggestions are shown with.
    # See https://github.com/zsh-users/zsh-autosuggestions/blob/master/README.md#suggestion-highlight-style
    ZSH_AUTOSUGGEST_HIGHLIGHT_STYLE='fg=228'

  else
    export LIGHT_MODE='LIGHT'
    export BAT_THEME='Coldark-Cold'
    export GREP_COLORS='sl=49;38;5;242;2:cx=49;38;5;247;2:mt=48;5;222;38;5;197;1;4:fn=49;38;5;199;2:ln=49;38;5;199;2:bn=49;38;5;141;2:se=49;38;5;81;1'

    ZSH_AUTOSUGGEST_HIGHLIGHT_STYLE='fg=090'

  fi;
}

if [[ $(uname) == "Darwin" ]] ; then
  precmd() { update_theme }
fi;

# bat for president
alias cat=bat
alias less=bat

# alternative to ls for beautifulness
# alias ls='exa -lhgbH'
# alias ll='ls'
# alias l='ls'

alias ss='sudo su -'

